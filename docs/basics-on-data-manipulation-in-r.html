<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Basics on data manipulation in R | GEOG380.knit</title>
<meta name="description" content="Figure 3.1: R console  You should think of R as an advance scientific calculator like the ones you used in high school. Basically, there is a set of basic functions already installed in R, which...">
<meta name="generator" content="bookdown 0.26.3 with bs4_book()">
<meta property="og:title" content="3 Basics on data manipulation in R | GEOG380.knit">
<meta property="og:type" content="book">
<meta property="og:description" content="Figure 3.1: R console  You should think of R as an advance scientific calculator like the ones you used in high school. Basically, there is a set of basic functions already installed in R, which...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Basics on data manipulation in R | GEOG380.knit">
<meta name="twitter:description" content="Figure 3.1: R console  You should think of R as an advance scientific calculator like the ones you used in high school. Basically, there is a set of basic functions already installed in R, which...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""><h1 style="font-size:17px">
By Camilo Mora, Ph.D.
</h1></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="introduction.html">Introduction</a></li>
<li><a class="" href="class-expectations.html">Class expectations</a></li>
<li><a class="" href="the-scientific-method.html"><span class="header-section-number">1</span> The scientific method</a></li>
<li><a class="" href="installing-programs.html"><span class="header-section-number">2</span> Installing programs</a></li>
<li><a class="active" href="basics-on-data-manipulation-in-r.html"><span class="header-section-number">3</span> Basics on data manipulation in R</a></li>
<li><a class="" href="basic-plots.html"><span class="header-section-number">4</span> Basic plots</a></li>
<li><a class="" href="descriptive-statistics.html"><span class="header-section-number">5</span> Descriptive statistics</a></li>
<li><a class="" href="correlation-1.html"><span class="header-section-number">6</span> Correlation</a></li>
<li><a class="" href="regression-1.html"><span class="header-section-number">7</span> Regression</a></li>
<li><a class="" href="hypothesis-testing.html"><span class="header-section-number">8</span> Hypothesis testing</a></li>
<li><a class="" href="standard-hypothesis-tests.html"><span class="header-section-number">9</span> Standard hypothesis tests</a></li>
<li><a class="" href="one-sample-tests.html"><span class="header-section-number">10</span> One sample tests</a></li>
<li><a class="" href="two-sample-tests.html"><span class="header-section-number">11</span> Two sample tests</a></li>
<li><a class="" href="multiple-sample-test.html"><span class="header-section-number">12</span> Multiple sample test</a></li>
<li><a class="" href="final-project.html"><span class="header-section-number">13</span> Final project</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="basics-on-data-manipulation-in-r" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Basics on data manipulation in R<a class="anchor" aria-label="anchor" href="#basics-on-data-manipulation-in-r"><i class="fas fa-link"></i></a>
</h1>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-43"></span>
<img src="images/R.png" alt="R console" width="80%"><p class="caption">
Figure 3.1: R console
</p>
</div>
<p>You should think of R as an advance scientific calculator like the ones you used in high school. Basically, there is a set of basic functions already installed in R, which you can use with your data.</p>
<p>You can also install packages, which gives you access to additional functions.</p>
<p>Use Google to find what packages may have the functions you need. Say you want to do a genotypic analysis. Simply Google “R packages to do genotypic analysis”. If you want to do animations, search “how to do an animation in R”.</p>
<div id="variables-1" class="section level2 unnumbered">
<h2>Variables<a class="anchor" aria-label="anchor" href="#variables-1"><i class="fas fa-link"></i></a>
</h2>
<p>Variables in R are names used to storage objects that you can manipulate. For instance, let me create a variable “A”, whicha I want it to be the value 1. Basically, in the R console I type:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">A</span><span class="op">=</span><span class="fl">1</span></span></code></pre></div>
<p>then click “Enter”. That command, just created a variable A, which has a value of 1.</p>
<p>To check, type “A” +“Enter”.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">A</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>Let’s now create a variable called B, which is equal to 2.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">B</span><span class="op">=</span><span class="fl">2</span></span></code></pre></div>
<p>I can now use those two variables to see what happens when I add them:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">A</span><span class="op">+</span><span class="va">B</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>You cal also create a new variable based on other variables. For instance:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">C</span><span class="op">=</span><span class="va">A</span><span class="op">-</span><span class="va">B</span></span>
<span><span class="va">C</span></span></code></pre></div>
<pre><code>## [1] -1</code></pre>
<p>You can check all the variables you have created using the command ls()</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] "A"              "B"              "C"              "f"             
##  [5] "i"              "MeanPopulation" "MeanSample"     "Merge"         
##  [9] "Population"     "r"              "Results"        "Sample"        
## [13] "SampleSize"     "trial"</code></pre>
<p>As you can see, up to this moment I have created three variables, named A, B and C.</p>

<div class="rmdwarning">
With rare exceptions, each line of command in R is independent.
</div>
<p>You should try now. Open R in your computer or use the console below. The console below is exactly what you have in R in your computer. We will use this type of window in a few instances in this book, but I recommend you do your practices in your own computer.</p>
<p>Create a variable called D=10 and other called z=5, and calculate thhe difference between D and z.</p>
<iframe src="https://mora.shinyapps.io/Console/?showcase=0" width="100%" height="300px">
</iframe>
</div>
<div id="comments" class="section level2 unnumbered">
<h2>Comments<a class="anchor" aria-label="anchor" href="#comments"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdwarning">
Comments are text you use to describe your code. They have to be preeceded with the number sign (#). Any line command after # will not be run by R
</div>
<p>As you start coding, it is always a good practice that you explain with your own words what each line of code is intended for.</p>
<p>I cannot tell you the number of times, I have gone back to my old codes and ask myself, what was the purpose of this line. What was I thinking at that time?</p>
<p>To ensure codes can be easy understood later on, we use comments. R comments are text added to your code, which R does not process.</p>
<p>Any comment in R has to be preceded with the number sign (#). For instance:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">A</span><span class="op">=</span><span class="fl">10</span> <span class="co"># Here I used R to show how to create a variable</span></span>
<span><span class="va">B</span><span class="op">=</span><span class="fl">20</span> <span class="co"># In this case, i wanted my variable B to be 2</span></span>
<span><span class="va">A</span><span class="op">+</span><span class="va">B</span></span></code></pre></div>
<pre><code>## [1] 30</code></pre>
<p>w</p>
</div>
<div id="operators" class="section level2 unnumbered">
<h2>Operators<a class="anchor" aria-label="anchor" href="#operators"><i class="fas fa-link"></i></a>
</h2>
<div id="assignment-operators" class="section level3 unnumbered">
<h3>Assignment operators<a class="anchor" aria-label="anchor" href="#assignment-operators"><i class="fas fa-link"></i></a>
</h3>
<p>As you noted in my previous page, I used the equal sign (=) to assign a value to a letter variable; that is called an assignment operator. Another more broadly recommended assignment operator is &gt;-, which is used like this:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">&lt;-</span><span class="fl">10</span> <span class="co"># in this case I used &lt;- as the assigment operators</span></span></code></pre></div>
<p>Note that in the code above I use &gt;- instead of =</p>
<p>I can verify this, by typing a in the R console and then hitting enter.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
</div>
<div id="arithmetic-operators" class="section level3 unnumbered">
<h3>Arithmetic operators<a class="anchor" aria-label="anchor" href="#arithmetic-operators"><i class="fas fa-link"></i></a>
</h3>
<p>R is preloaded with a lot of built-in mathematical operators. Here are some basic ones:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">+</td>
<td align="left">Addition</td>
</tr>
<tr class="even">
<td align="left">-</td>
<td align="left">Subtraction</td>
</tr>
<tr class="odd">
<td align="left">*</td>
<td align="left">Multiplication</td>
</tr>
<tr class="even">
<td align="left">/</td>
<td align="left">Division</td>
</tr>
<tr class="odd">
<td align="left">^</td>
<td align="left">Exponent</td>
</tr>
<tr class="even">
<td align="left">log(x)</td>
<td align="left">Natural log</td>
</tr>
<tr class="odd">
<td align="left">log10(x)</td>
<td align="left">Common log</td>
</tr>
<tr class="even">
<td align="left">abs(x)</td>
<td align="left">Absolute value</td>
</tr>
<tr class="odd">
<td align="left">sqrt(x)</td>
<td align="left">Square root</td>
</tr>
<tr class="even">
<td align="left">ceiling(x)</td>
<td align="left">Round to largest integer</td>
</tr>
<tr class="odd">
<td align="left">floor(x)</td>
<td align="left">Round to smallest integer</td>
</tr>
<tr class="even">
<td align="left">round(x, digits = 0)</td>
<td align="left">Round number to given number of digits</td>
</tr>
<tr class="odd">
<td align="left">rep(x, times = 1)</td>
<td align="left">Repeat a number a given number of times</td>
</tr>
<tr class="even">
<td align="left">seq(from, to, by= )</td>
<td align="left">Create a sequence of numbers</td>
</tr>
<tr class="odd">
<td align="left">sample(x,n,replace=T)</td>
<td align="left">Select n random numbers from vector x</td>
</tr>
</tbody>
</table></div>
<p>Lets say I have a variable a=145.677, but I one to stimate the largest integer of that number, then</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">=</span><span class="fl">145.677</span></span>
<span><span class="va">b</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code>## [1] 146</code></pre>
<p>Give a try to some of these operators, yourself.</p>
<iframe src="https://mora.shinyapps.io/Console/?showcase=0" width="100%" height="300px">
</iframe>
<p>Any time you need an operator, but you do not know what is it in R, simply ask your friend Google. Say you want to calculate the cosine of a number?. Simply search in Google “How to calculate a cosine in R”.</p>
</div>
<div id="character-operators" class="section level3 unnumbered">
<h3>Character operators<a class="anchor" aria-label="anchor" href="#character-operators"><i class="fas fa-link"></i></a>
</h3>
<p>At times, you do not want to handle numbers but words. R also has functions for that.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">substr(x, start=n1, stop=n2)</td>
<td align="left">Extract or replace substrings in a character vector</td>
</tr>
<tr class="even">
<td align="left">grep(pattern, x , ignore.case=FALSE, fixed=FALSE)</td>
<td align="left">Search for pattern in x</td>
</tr>
<tr class="odd">
<td align="left">sub(pattern, replacement, x, ignore.case =FALSE, fixed=FALSE)</td>
<td align="left">Find pattern in x and replace with replacement text</td>
</tr>
<tr class="even">
<td align="left">strsplit(x, split)</td>
<td align="left">Split the elements of character vector x at split</td>
</tr>
<tr class="odd">
<td align="left">paste(…, sep=’’)</td>
<td align="left">Concatenate strings</td>
</tr>
</tbody>
</table></div>
<p>Lets try a few examples:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">=</span><span class="st">"camilo1989"</span> <span class="co">#here I have a character variable, but want to remove that number, so</span></span>
<span><span class="va">b</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"1989"</span>, <span class="st">""</span>, <span class="va">a</span><span class="op">)</span> <span class="co">#here I replace the value indicated in between the first quotations, for what is in between the second quotations, in this case nothing.</span></span>
<span><span class="va">b</span></span></code></pre></div>
<pre><code>## [1] "camilo"</code></pre>

<div class="rmdwarning">
Characters are always between quotations and this is done to differentiate from variable names.
Say I have a variable I called data but I also have a word I want to use called data as well. In this case data by ilfset will be the database, but “data” will be recongnized as chracaters. Later on we will get to this.
</div>
<p>The function paste is another function that you will use a lot.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">=</span><span class="st">"camilo"</span> <span class="co">#here I have a character variable, that I want to concatenate with another one. </span></span>
<span><span class="va">b</span><span class="op">=</span><span class="st">"1989"</span> <span class="co">#second variable.</span></span>
<span><span class="va">c</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep<span class="op">=</span><span class="st">"_"</span><span class="op">)</span> <span class="co">#here I merge a and b, and separate them with an underscore</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "camilo_1989"</code></pre>
<p>If you want nothing to separate the words, put nothing between the brackets in sep, like this</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">a</span>,<span class="va">b</span>,sep<span class="op">=</span><span class="st">""</span><span class="op">)</span></span>
<span><span class="va">c</span></span></code></pre></div>
<pre><code>## [1] "camilo1989"</code></pre>
</div>
</div>
<div id="custom-made-functions" class="section level2 unnumbered">
<h2>Custom made functions<a class="anchor" aria-label="anchor" href="#custom-made-functions"><i class="fas fa-link"></i></a>
</h2>
<p>As you become better at coding, you probably want to start creating your own functions. You can even create functions, that use other functions. Think of it like a lego game, in which you have thousands of functions (legos) that you can use to create whatever you want. Just as the Legos game, creating functions is very simple.</p>
<p>The structure of an R function is as follow:</p>
<div class="inline-figure"><img src="images/Function.png" width="80%" style="display: block; margin: auto;"></div>
<ol style="list-style-type: decimal">
<li>You have the name you want for your function</li>
<li>What arguments are needed for your function</li>
<li>Between {} you place what you want to do with your arguments</li>
<li>Outline what you want to output from your function</li>
</ol>
<p>Let’s have an example. Say, I have two numbers (12.78454 and 1.34893439), which I want to first multiple, then divide the result by 2, then estimate the cosine, then multiple by pi, then estimate the ceiling; and I want to do this four times with different starting numbers. So lets start coding this,</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">=</span><span class="fl">12.78454</span>              <span class="co">#I place  first number in a variable, so I do not have to retype all numbers</span></span>
<span><span class="va">b</span><span class="op">=</span><span class="fl">1.34893439</span>            <span class="co">#same for second number</span></span>
<span><span class="va">Multiple_AB</span><span class="op">=</span><span class="va">a</span><span class="op">*</span><span class="va">b</span>         <span class="co">#first command I have to do. Create new varaible multiplying a and b</span></span>
<span><span class="va">Divide</span><span class="op">=</span> <span class="va">Multiple_AB</span><span class="op">/</span><span class="fl">2</span>   <span class="co">#second command is to divide the output by 2</span></span>
<span><span class="va">Cosine</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="va">Divide</span><span class="op">)</span>     <span class="co">#third command is to estimate the cosine in the results</span></span>
<span><span class="va">PI</span><span class="op">=</span><span class="va">Cosine</span><span class="op">*</span><span class="va">pi</span>            <span class="co">#four command is to multiply result by pi</span></span>
<span><span class="va">Cealing</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span>     <span class="co">#finally, estimate the largest integer</span></span>
<span><span class="va">Cealing</span>                 <span class="co">#here is the result of that operation above</span></span></code></pre></div>
<pre><code>## [1] -2</code></pre>
<p>If you see the code above, I wrote 8 lines of code to get the result for the first two set of numbers. If I want to do the same for say three other set of numbers, I will have to write 24 lines of code, not to mention the chance for error.</p>
<p>Since the general operation is same for all cases, you can simply create a function, which will reduce the lenght of the code, while ensuring you use exactly the same procedure for all numbers. Let’s do it,</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CamilosFunction</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">argument1</span>, <span class="va">argument2</span><span class="op">)</span> <span class="op">{</span> <span class="co">#Argument 1 and 2, are the two numbers I have to run in my function</span></span>
<span><span class="va">Multiple_AB</span><span class="op">=</span><span class="va">argument1</span><span class="op">*</span><span class="va">argument2</span>         <span class="co">#first command I have to do</span></span>
<span><span class="va">Divide</span><span class="op">=</span> <span class="va">Multiple_AB</span><span class="op">/</span><span class="fl">2</span>                   <span class="co">#second command is to divide the output by 2</span></span>
<span><span class="va">Cosine</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="va">Divide</span><span class="op">)</span>                     <span class="co">#third command is to estimate the cosine in the results</span></span>
<span><span class="va">PI</span><span class="op">=</span><span class="va">Cosine</span><span class="op">*</span><span class="va">pi</span>                            <span class="co">#four command is to multiply result by pi</span></span>
<span><span class="va">Cealing</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="va">PI</span><span class="op">)</span>                     <span class="co">#finally, estimate the largest integer</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span> <span class="op">(</span><span class="va">Cealing</span><span class="op">)</span>                        <span class="co">#here is the result of that operation above</span></span>
<span><span class="op">}</span>                 </span></code></pre></div>
<p>If you see, all I did was to copy my entire process from the first set of values, and replace a and b, for the arguments in my function, add the {} and name my function. I just created a function, called CamilosFunction, that requires two values, to do the process indicated above, and return the result. Lets see,</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">=</span><span class="fl">12.78454</span></span>
<span><span class="va">b</span><span class="op">=</span><span class="fl">1.34893439</span></span>
<span><span class="fu">CamilosFunction</span> <span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span> <span class="co">#here is my function, which run many commands and give me a single result.</span></span></code></pre></div>
<pre><code>## [1] -2</code></pre>
<p>You can now reuse your function with different numbers, each time requiring only one line of code.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CamilosFunction</span> <span class="op">(</span><span class="fl">12.78454</span>,<span class="fl">10002.78454</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] -2</code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CamilosFunction</span> <span class="op">(</span><span class="fl">120.78454</span>,<span class="fl">102.78454</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">CamilosFunction</span> <span class="op">(</span><span class="fl">912.74</span>,<span class="fl">10002.78454</span><span class="op">)</span> </span></code></pre></div>
<pre><code>## [1] -1</code></pre>
<p>Create your own function now. In which you take three numbers (4,2,3), calculate their average, then multiple the result by 4, then estimate the sin, and finally calculate the square.</p>
</div>
<div id="data-structure-types" class="section level2 unnumbered">
<h2>Data structure types<a class="anchor" aria-label="anchor" href="#data-structure-types"><i class="fas fa-link"></i></a>
</h2>
<p>R provides numerous ways to hold data. Let’s check some of them.</p>
<div class="inline-figure"><img src="images/RDataStructure.png" width="100%" style="display: block; margin: auto;"></div>
<div id="vectors" class="section level3 unnumbered">
<h3>Vectors<a class="anchor" aria-label="anchor" href="#vectors"><i class="fas fa-link"></i></a>
</h3>
<p>A vector is a collection of values. We call the individual values “elements” of the vector.</p>
<p>We can make vectors with c( ). c means “combine”. Say you have three numbers 1,4,5 and you just do not want to type them every time. you can then put the numbers in a vector.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="co">#here I have a vector with three numbers</span></span></code></pre></div>
<pre><code>## [1] 1 4 5</code></pre>
<p>You can also run operations in a vector. Lets use the example above, in which I want to multiply each value in that vector by 2.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span> <span class="co">#here create a variable that contains my vector of three numbers</span></span>
<span><span class="va">a</span><span class="op">*</span><span class="fl">2</span>        <span class="co">#here I multiply my variable (vector with three numbers)  by 2.</span></span></code></pre></div>
<pre><code>## [1]  2  8 10</code></pre>
</div>
<div id="matrix" class="section level3 unnumbered">
<h3>Matrix<a class="anchor" aria-label="anchor" href="#matrix"><i class="fas fa-link"></i></a>
</h3>
<p>You can merge multiple vectors to create a matrix. You can merge the vectors by columns using the function cbind or by rows using the function rbind. Lets do an example to clarify.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Vector1</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">4</span>,<span class="fl">5</span><span class="op">)</span>                          <span class="co">#here I have vector 1 with three numbers</span></span>
<span><span class="va">Vector2</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">56</span>,<span class="fl">42</span>,<span class="fl">93</span><span class="op">)</span>                       <span class="co">#here I have vector 2 with three numbers</span></span>
<span><span class="va">ColumnMergedVector</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">Vector1</span>,<span class="va">Vector2</span><span class="op">)</span> <span class="co">#I use cbind to merge the vector by column</span></span>
<span><span class="va">ColumnMergedVector</span></span></code></pre></div>
<pre><code>##      Vector1 Vector2
## [1,]       1      56
## [2,]       4      42
## [3,]       5      93</code></pre>
<p>See in the result above, how each vector became a column.</p>
<p>May be you prefer to merge them by rows</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RowMergedVector</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">Vector1</span>,<span class="va">Vector2</span><span class="op">)</span> <span class="co">#I use rbind to merge the vector by rows</span></span>
<span><span class="va">RowMergedVector</span></span></code></pre></div>
<pre><code>##         [,1] [,2] [,3]
## Vector1    1    4    5
## Vector2   56   42   93</code></pre>
<p>You can now see how the two vectors were merged by rows.</p>
</div>
<div id="dataframes" class="section level3 unnumbered">
<h3>DataFrames<a class="anchor" aria-label="anchor" href="#dataframes"><i class="fas fa-link"></i></a>
</h3>
<p>Dataframes are the most common type of data structure in R. It is has similar topology to a matrix, but it is more diverse in the types of data it can use. Dataframes, are like the “Sheet” version in Excel. To create a dataframe you use the data.frame function. Lets do an example.</p>
<p>s</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DataFrame</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">Vector1</span>,<span class="va">Vector2</span><span class="op">)</span> <span class="co">#I use data.frame to merge two vectros of data</span></span>
<span><span class="va">DataFrame</span></span></code></pre></div>
<pre><code>##   Vector1 Vector2
## 1       1      56
## 2       4      42
## 3       5      93</code></pre>
<p>Dataframes also allow you to rename the column and row names, and there different ways to do that. Here is one,</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">DataFrame</span><span class="op">)</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Height"</span>,<span class="st">"Width"</span><span class="op">)</span> <span class="co">#Here I rename the two columsn in the dataframe, with the names used in a vector. </span></span>
<span><span class="va">DataFrame</span></span></code></pre></div>
<pre><code>##   Height Width
## 1      1    56
## 2      4    42
## 3      5    93</code></pre>
<p>You are probably asking yourself what is the difference between a matrix and a data.frame?. Here are some differences:</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th style="text-align:left;">
Matrix
</th>
<th style="text-align:left;">
Dataframe
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Collection of data sets arranged in a two dimensional rectangular organisation
</td>
<td style="text-align:left;">
Stores data tables that contains multiple data types in multiple column called fields.
</td>
</tr>
<tr>
<td style="text-align:left;">
It’s m*n array with similar data type.
</td>
<td style="text-align:left;">
It is a list of vector of equal length. It is a generalized form of matrix.
</td>
</tr>
<tr>
<td style="text-align:left;">
It has fixed number of rows and columns.
</td>
<td style="text-align:left;">
It has variable number of rows and columns.
</td>
</tr>
<tr>
<td style="text-align:left;">
The data stored in columns can be only of same data type.
</td>
<td style="text-align:left;">
The data stored must be numeric, character or factor type.
</td>
</tr>
<tr>
<td style="text-align:left;">
Data types are homogeneous.
</td>
<td style="text-align:left;">
Data types are heterogeneous.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="loading-your-own-data-into-r" class="section level2 unnumbered">
<h2>Loading your own data into R<a class="anchor" aria-label="anchor" href="#loading-your-own-data-into-r"><i class="fas fa-link"></i></a>
</h2>
<p>R also allows you to import your own data from a diversity of formats. Here we will use the most basic one, which is to import .csv files (the so-called comma delimited data). In this type of file, data are listed by rows, with the number between commas in a row indicating the columns.</p>
<p>To load a .csv file in R, you use the command read.csv(). Between brackets you put the path to where the file is located. You write that path between quotation. It sounds complicated, but it is simple. Let’s just try an example.</p>
<ol style="list-style-type: decimal">
<li><p>Create a folder in your local desktop called “Data”. It is good practice to keep your data and codes in separated folders that you can then easily identify by the name alone.</p></li>
<li><p>Download a csv file from <a href="https://raw.githubusercontent.com/Camilo-Mora/GEO380/main/Datasets/Countries_GDP.csv">here</a>. Right click on the page and click on “Save page as” in the pop-up window. Name the file “Countries_GDP.csv”, and navigate to the “Data” folder you just created to save the file in there. Click “Save”. That file should now appear in your “Data” folder.</p></li>
<li><p>Now that you have the csv file in your local hard-drive, you can load it into R. For this you need to do a couple things. First, get the path to where the file is at. For this, click on your windows explorer (that is the button that looks like a folder in your desktop, see image below)</p></li>
</ol>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-75"></span>
<img src="images/WindowsBar.png" alt="Windows explorer" width="100%"><p class="caption">
Figure 3.2: Windows explorer
</p>
</div>
<p>Navigate to the folder Data where you saved the file, and put the mouse cursor in the selectable window (See arrow in image below). That will reveal the path where the file is saved in your computer.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-76"></span>
<img src="images/DataFolder.png" alt="Getting path to file" width="100%"><p class="caption">
Figure 3.3: Getting path to file
</p>
</div>
<p>Next, right click on that same window, and click on Copy. That will copy the path to your file (See image below).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-77"></span>
<img src="images/CopyPath.png" alt="Getting path to file" width="100%"><p class="caption">
Figure 3.4: Getting path to file
</p>
</div>
<p>Open R, right click anywhere inside the main window of R and click on “Paste”. It should look something like this:</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-78"></span>
<img src="images/PathInR.png" alt="Getting path to file" width="100%"><p class="caption">
Figure 3.5: Getting path to file
</p>
</div>
<p>Now you need to replace each back-slash for a forward-slash in your path. The position of those keys in my keyboard are shown in the image below.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-79"></span>
<img src="images/Keyboard.png" alt="Slash keys in keyboard" width="100%"><p class="caption">
Figure 3.6: Slash keys in keyboard
</p>
</div>
<p>So the path to the file should be change from this:</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># "D:/GEO380/Datasets/"</span></span></code></pre></div>
<p>to this:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># "D:/GEO380/Datasets/"</span></span></code></pre></div>
<p>Now, to the path of the folder in which you have the file, you need to add the file name, like this:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># "D:/GEO380/Datasets/Countries_GDP.csv"</span></span></code></pre></div>
<p>I have to tell you that when I got started in R. A colleague sent me a file and told me to open his file in R. It sounded simple at the time, but it took me two days to figure out all these tiny things about setting the file correctly. Back in those days the internet was not so full of useful tutorials about how to do this. Ok, let’s keep going.</p>
<p>Now add to your path the R function that is used read csv files, which is “read.csv()”, like this:</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read.csv("D:/GEO380/Datasets/Countries_GDP.csv")</span></span></code></pre></div>
<p>I suggest you attach this file to a variable name, so you can call it later.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GDPData</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"D:/GEO380/Datasets/Countries_GDP.csv"</span><span class="op">)</span></span></code></pre></div>
<p>That is it, now you have loaded your data into R. Check it out by looking at the top part of the database</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span> <span class="op">(</span><span class="va">GDPData</span><span class="op">)</span></span></code></pre></div>
<pre><code>##       country continent year gdpPercap
## 1 Afghanistan      Asia 1952  779.4453
## 2 Afghanistan      Asia 1957  820.8530
## 3 Afghanistan      Asia 1962  853.1007
## 4 Afghanistan      Asia 1967  836.1971
## 5 Afghanistan      Asia 1972  739.9811
## 6 Afghanistan      Asia 1977  786.1134</code></pre>
<p>By the way, if you know that the csv file in the web will not be deleted or moved, you can read the data from the web directly using the URL to the file, instead of the path. Like this,</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GDPData</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/Camilo-Mora/GEO380/main/Datasets/Countries_GDP.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="calling-elements-in-a-data-frame" class="section level2 unnumbered">
<h2>Calling elements in a data frame<a class="anchor" aria-label="anchor" href="#calling-elements-in-a-data-frame"><i class="fas fa-link"></i></a>
</h2>
<p>Ok, now that you know how to store data in R. We need to learn how to see the data. To see a given data container, you can simply typeb its name and click enter. For instance,</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DataFrame</span></span></code></pre></div>
<pre><code>##   Height Width
## 1      1    56
## 2      4    42
## 3      5    93</code></pre>
<p>This is an ok way to see your data if the data container is not too big. However, if you have lots of data this command will fill up your screen. Instead, you can use the function head or tail, which will let you see the top five or the bottom five rows in a dataframe. Lets see.</p>
<p>Let me first create a medium size dataframe:</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DataFrame</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span> x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">250</span><span class="op">)</span><span class="op">)</span>,     <span class="co"># in Column 1 I repeat the number 1 for 25 times</span></span>
<span>                        x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">250</span><span class="op">)</span>, <span class="co">#Column 2 I create a sequence of numbers from 1 to 25</span></span>
<span>                        x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span>,<span class="fl">250</span><span class="op">)</span><span class="op">)</span> <span class="co"># select 25 random numbers between 1 and 10000</span></span></code></pre></div>
<p>In the code above, I just create a dummy dataframe with three columns and 250 rows using functions we already described in the chapter on arithmetic operators.</p>
<p>If I try to see the full database, I just type the name of the dataframe and click enter. However, as you will notice calling the full dataframe will use a lot of your screen space because it will attempt to display all the data.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DataFrame</span></span></code></pre></div>
<pre><code>##     x1  x2   x3
## 1    1   1  596
## 2    1   2  891
## 3    1   3  520
## 4    1   4  152
## 5    1   5  717
## 6    1   6  887
## 7    1   7  408
## 8    1   8  616
## 9    1   9   20
## 10   1  10  842
## 11   1  11  100
## 12   1  12  151
## 13   1  13  158
## 14   1  14  472
## 15   1  15   57
## 16   1  16  441
## 17   1  17  526
## 18   1  18  556
## 19   1  19  804
## 20   1  20  331
## 21   1  21  112
## 22   1  22   25
## 23   1  23  956
## 24   1  24  445
## 25   1  25  782
## 26   1  26  982
## 27   1  27  809
## 28   1  28  554
## 29   1  29  790
## 30   1  30    4
## 31   1  31  284
## 32   1  32   58
## 33   1  33  295
## 34   1  34  282
## 35   1  35  252
## 36   1  36  973
## 37   1  37  276
## 38   1  38  836
## 39   1  39  697
## 40   1  40  321
## 41   1  41  563
## 42   1  42  661
## 43   1  43  506
## 44   1  44  905
## 45   1  45   26
## 46   1  46  421
## 47   1  47   43
## 48   1  48  489
## 49   1  49  622
## 50   1  50  127
## 51   1  51  129
## 52   1  52  801
## 53   1  53  326
## 54   1  54  566
## 55   1  55  281
## 56   1  56  484
## 57   1  57  262
## 58   1  58  651
## 59   1  59  928
## 60   1  60  137
## 61   1  61  358
## 62   1  62  417
## 63   1  63  606
## 64   1  64  931
## 65   1  65  586
## 66   1  66  364
## 67   1  67  924
## 68   1  68  873
## 69   1  69  614
## 70   1  70  914
## 71   1  71   79
## 72   1  72  872
## 73   1  73  590
## 74   1  74  819
## 75   1  75   60
## 76   1  76  415
## 77   1  77  805
## 78   1  78  624
## 79   1  79  429
## 80   1  80   48
## 81   1  81  761
## 82   1  82  835
## 83   1  83   24
## 84   1  84  633
## 85   1  85  297
## 86   1  86  471
## 87   1  87  564
## 88   1  88  570
## 89   1  89  645
## 90   1  90  583
## 91   1  91  760
## 92   1  92  496
## 93   1  93  175
## 94   1  94  547
## 95   1  95  503
## 96   1  96  324
## 97   1  97    7
## 98   1  98  213
## 99   1  99  197
## 100  1 100  516
## 101  1 101  399
## 102  1 102  459
## 103  1 103  422
## 104  1 104  140
## 105  1 105  378
## 106  1 106  640
## 107  1 107  708
## 108  1 108  831
## 109  1 109   14
## 110  1 110  844
## 111  1 111  426
## 112  1 112  384
## 113  1 113  704
## 114  1 114  667
## 115  1 115  910
## 116  1 116  432
## 117  1 117  256
## 118  1 118  821
## 119  1 119  825
## 120  1 120  610
## 121  1 121  710
## 122  1 122  514
## 123  1 123  571
## 124  1 124  327
## 125  1 125  490
## 126  1 126  588
## 127  1 127  126
## 128  1 128  845
## 129  1 129  101
## 130  1 130  391
## 131  1 131  540
## 132  1 132  283
## 133  1 133  393
## 134  1 134   81
## 135  1 135  707
## 136  1 136  672
## 137  1 137  340
## 138  1 138  885
## 139  1 139  938
## 140  1 140    5
## 141  1 141  196
## 142  1 142  113
## 143  1 143  473
## 144  1 144  630
## 145  1 145  430
## 146  1 146   37
## 147  1 147  205
## 148  1 148  655
## 149  1 149  748
## 150  1 150   22
## 151  1 151  802
## 152  1 152  332
## 153  1 153  103
## 154  1 154   65
## 155  1 155  769
## 156  1 156  888
## 157  1 157  604
## 158  1 158  314
## 159  1 159  878
## 160  1 160  214
## 161  1 161   50
## 162  1 162  864
## 163  1 163  380
## 164  1 164  886
## 165  1 165  198
## 166  1 166  202
## 167  1 167  329
## 168  1 168  451
## 169  1 169  839
## 170  1 170  737
## 171  1 171  834
## 172  1 172  960
## 173  1 173  759
## 174  1 174  869
## 175  1 175  589
## 176  1 176   68
## 177  1 177   70
## 178  1 178  293
## 179  1 179  303
## 180  1 180  721
## 181  1 181  194
## 182  1 182  289
## 183  1 183  987
## 184  1 184   73
## 185  1 185  385
## 186  1 186  203
## 187  1 187  339
## 188  1 188  763
## 189  1 189  232
## 190  1 190  718
## 191  1 191  594
## 192  1 192  392
## 193  1 193  695
## 194  1 194  779
## 195  1 195  944
## 196  1 196  487
## 197  1 197  365
## 198  1 198  783
## 199  1 199  893
## 200  1 200  375
## 201  1 201  546
## 202  1 202  773
## 203  1 203  231
## 204  1 204  871
## 205  1 205  879
## 206  1 206  674
## 207  1 207   96
## 208  1 208  341
## 209  1 209  575
## 210  1 210  301
## 211  1 211  840
## 212  1 212  155
## 213  1 213  957
## 214  1 214  420
## 215  1 215  658
## 216  1 216  145
## 217  1 217  567
## 218  1 218  260
## 219  1 219  529
## 220  1 220  584
## 221  1 221  512
## 222  1 222  350
## 223  1 223   71
## 224  1 224  229
## 225  1 225  562
## 226  1 226  509
## 227  1 227  111
## 228  1 228  788
## 229  1 229  929
## 230  1 230  222
## 231  1 231  860
## 232  1 232  136
## 233  1 233  411
## 234  1 234  494
## 235  1 235  474
## 236  1 236  337
## 237  1 237   94
## 238  1 238   15
## 239  1 239  169
## 240  1 240  173
## 241  1 241  407
## 242  1 242  379
## 243  1 243  569
## 244  1 244 1000
## 245  1 245  307
## 246  1 246  966
## 247  1 247  150
## 248  1 248   29
## 249  1 249   74
## 250  1 250  189</code></pre>
<div id="head" class="section level4 unnumbered">
<h4>Head<a class="anchor" aria-label="anchor" href="#head"><i class="fas fa-link"></i></a>
</h4>
<p>Alternatively, you can just check the top rows using the head function. Like this:</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">DataFrame</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   x1 x2  x3
## 1  1  1 596
## 2  1  2 891
## 3  1  3 520
## 4  1  4 152
## 5  1  5 717
## 6  1  6 887</code></pre>
</div>
<div id="tail" class="section level4 unnumbered">
<h4>Tail<a class="anchor" aria-label="anchor" href="#tail"><i class="fas fa-link"></i></a>
</h4>
<p>Or the bottom rows using the tail function. Like this:</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">DataFrame</span><span class="op">)</span></span></code></pre></div>
<pre><code>##     x1  x2  x3
## 245  1 245 307
## 246  1 246 966
## 247  1 247 150
## 248  1 248  29
## 249  1 249  74
## 250  1 250 189</code></pre>
</div>
<div id="index" class="section level4 unnumbered">
<h4>Index<a class="anchor" aria-label="anchor" href="#index"><i class="fas fa-link"></i></a>
</h4>
<p>You can also check specific elements of the dataframe using the index function, which in R is indicated with the square brackets [row,column]. The number to the left of the comma will be the row number, and the number to the right the column number. If you do not add a number, it will display all columns or all rows. For instance, check what number is in column 3 in the 2th row?</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DataFrame</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code>## [1] 891</code></pre>
<iframe src="https://mora.shinyapps.io/QuestionsChapter3/" width="100%" height="400px">
</iframe>
</div>
<div id="calling-columns-by-name" class="section level4 unnumbered">
<h4>Calling columns by name<a class="anchor" aria-label="anchor" href="#calling-columns-by-name"><i class="fas fa-link"></i></a>
</h4>
<p>To call a column by name in a dataframe, you use the dollar sign $ to merge the name of the dataframe with the name of the column, like this,</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">DataFrame</span><span class="op">$</span><span class="va">x3</span><span class="op">)</span> <span class="co">#here I only display the top values of the column Country_Name</span></span></code></pre></div>
<pre><code>## [1] 596 891 520 152 717 887</code></pre>
</div>
</div>
<div id="filter-data" class="section level2 unnumbered">
<h2>Filter data<a class="anchor" aria-label="anchor" href="#filter-data"><i class="fas fa-link"></i></a>
</h2>
<p>A recurring task in data analytics is to filter data, this means to select specific subsets/chucks of your data. Filters can be used to create new variables, to apply new functions, to see specific data, etc. There are numerous ways to filter data in R, but here we wall use the function filter in the package “dplyr”.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("dplyr")     #First, I install the package dplyr and tidyverse, since I have not installed it previously</span></span>
<span><span class="co"># install.packages("tidyverse") </span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> <span class="co">#next I load the packages into the current section of R.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>            </span></code></pre></div>
<p>Now, lets check the first few rows in the GDP database we loaded earlier,</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">GDPData</span><span class="op">)</span>             <span class="co">#lets look at the column head of the GDP data we loaded earlier.</span></span></code></pre></div>
<pre><code>##       country continent year gdpPercap
## 1699 Zimbabwe    Africa 1982  788.8550
## 1700 Zimbabwe    Africa 1987  706.1573
## 1701 Zimbabwe    Africa 1992  693.4208
## 1702 Zimbabwe    Africa 1997  792.4500
## 1703 Zimbabwe    Africa 2002  672.0386
## 1704 Zimbabwe    Africa 2007  469.7093</code></pre>
<p>From the subset of the data above, you can see that the GDPData database has four columns, and from the “year” column, you can tell that the data of GDP (gdpPercap) is repeated for each year. Hmm, but what if I just want to see the data for countries in Asia?. For that we use the function filter.</p>
<p>The syntax of the filter function reads like this:</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-96"></span>
<img src="images/Filter.png" alt="Filter function" width="100%"><p class="caption">
Figure 3.7: Filter function
</p>
</div>

<div class="rmdnote">
Pipes, %&gt;%, are a powerful tool for doing sequential operations. Commonly it requires tthe tidyverse package. In the next section you will better see the use of pipes.
</div>
<p>Now that you know the syntax of the filter function from the dplr package, lets test it.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GDPData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">continent</span><span class="op">==</span><span class="st">"Asia"</span><span class="op">)</span>       </span></code></pre></div>
<pre><code>##                country continent year   gdpPercap
## 1          Afghanistan      Asia 1952    779.4453
## 2          Afghanistan      Asia 1957    820.8530
## 3          Afghanistan      Asia 1962    853.1007
## 4          Afghanistan      Asia 1967    836.1971
## 5          Afghanistan      Asia 1972    739.9811
## 6          Afghanistan      Asia 1977    786.1134
## 7          Afghanistan      Asia 1982    978.0114
## 8          Afghanistan      Asia 1987    852.3959
## 9          Afghanistan      Asia 1992    649.3414
## 10         Afghanistan      Asia 1997    635.3414
## 11         Afghanistan      Asia 2002    726.7341
## 12         Afghanistan      Asia 2007    974.5803
## 13             Bahrain      Asia 1952   9867.0848
## 14             Bahrain      Asia 1957  11635.7995
## 15             Bahrain      Asia 1962  12753.2751
## 16             Bahrain      Asia 1967  14804.6727
## 17             Bahrain      Asia 1972  18268.6584
## 18             Bahrain      Asia 1977  19340.1020
## 19             Bahrain      Asia 1982  19211.1473
## 20             Bahrain      Asia 1987  18524.0241
## 21             Bahrain      Asia 1992  19035.5792
## 22             Bahrain      Asia 1997  20292.0168
## 23             Bahrain      Asia 2002  23403.5593
## 24             Bahrain      Asia 2007  29796.0483
## 25          Bangladesh      Asia 1952    684.2442
## 26          Bangladesh      Asia 1957    661.6375
## 27          Bangladesh      Asia 1962    686.3416
## 28          Bangladesh      Asia 1967    721.1861
## 29          Bangladesh      Asia 1972    630.2336
## 30          Bangladesh      Asia 1977    659.8772
## 31          Bangladesh      Asia 1982    676.9819
## 32          Bangladesh      Asia 1987    751.9794
## 33          Bangladesh      Asia 1992    837.8102
## 34          Bangladesh      Asia 1997    972.7700
## 35          Bangladesh      Asia 2002   1136.3904
## 36          Bangladesh      Asia 2007   1391.2538
## 37            Cambodia      Asia 1952    368.4693
## 38            Cambodia      Asia 1957    434.0383
## 39            Cambodia      Asia 1962    496.9136
## 40            Cambodia      Asia 1967    523.4323
## 41            Cambodia      Asia 1972    421.6240
## 42            Cambodia      Asia 1977    524.9722
## 43            Cambodia      Asia 1982    624.4755
## 44            Cambodia      Asia 1987    683.8956
## 45            Cambodia      Asia 1992    682.3032
## 46            Cambodia      Asia 1997    734.2852
## 47            Cambodia      Asia 2002    896.2260
## 48            Cambodia      Asia 2007   1713.7787
## 49               China      Asia 1952    400.4486
## 50               China      Asia 1957    575.9870
## 51               China      Asia 1962    487.6740
## 52               China      Asia 1967    612.7057
## 53               China      Asia 1972    676.9001
## 54               China      Asia 1977    741.2375
## 55               China      Asia 1982    962.4214
## 56               China      Asia 1987   1378.9040
## 57               China      Asia 1992   1655.7842
## 58               China      Asia 1997   2289.2341
## 59               China      Asia 2002   3119.2809
## 60               China      Asia 2007   4959.1149
## 61    Hong Kong, China      Asia 1952   3054.4212
## 62    Hong Kong, China      Asia 1957   3629.0765
## 63    Hong Kong, China      Asia 1962   4692.6483
## 64    Hong Kong, China      Asia 1967   6197.9628
## 65    Hong Kong, China      Asia 1972   8315.9281
## 66    Hong Kong, China      Asia 1977  11186.1413
## 67    Hong Kong, China      Asia 1982  14560.5305
## 68    Hong Kong, China      Asia 1987  20038.4727
## 69    Hong Kong, China      Asia 1992  24757.6030
## 70    Hong Kong, China      Asia 1997  28377.6322
## 71    Hong Kong, China      Asia 2002  30209.0152
## 72    Hong Kong, China      Asia 2007  39724.9787
## 73               India      Asia 1952    546.5657
## 74               India      Asia 1957    590.0620
## 75               India      Asia 1962    658.3472
## 76               India      Asia 1967    700.7706
## 77               India      Asia 1972    724.0325
## 78               India      Asia 1977    813.3373
## 79               India      Asia 1982    855.7235
## 80               India      Asia 1987    976.5127
## 81               India      Asia 1992   1164.4068
## 82               India      Asia 1997   1458.8174
## 83               India      Asia 2002   1746.7695
## 84               India      Asia 2007   2452.2104
## 85           Indonesia      Asia 1952    749.6817
## 86           Indonesia      Asia 1957    858.9003
## 87           Indonesia      Asia 1962    849.2898
## 88           Indonesia      Asia 1967    762.4318
## 89           Indonesia      Asia 1972   1111.1079
## 90           Indonesia      Asia 1977   1382.7021
## 91           Indonesia      Asia 1982   1516.8730
## 92           Indonesia      Asia 1987   1748.3570
## 93           Indonesia      Asia 1992   2383.1409
## 94           Indonesia      Asia 1997   3119.3356
## 95           Indonesia      Asia 2002   2873.9129
## 96           Indonesia      Asia 2007   3540.6516
## 97                Iran      Asia 1952   3035.3260
## 98                Iran      Asia 1957   3290.2576
## 99                Iran      Asia 1962   4187.3298
## 100               Iran      Asia 1967   5906.7318
## 101               Iran      Asia 1972   9613.8186
## 102               Iran      Asia 1977  11888.5951
## 103               Iran      Asia 1982   7608.3346
## 104               Iran      Asia 1987   6642.8814
## 105               Iran      Asia 1992   7235.6532
## 106               Iran      Asia 1997   8263.5903
## 107               Iran      Asia 2002   9240.7620
## 108               Iran      Asia 2007  11605.7145
## 109               Iraq      Asia 1952   4129.7661
## 110               Iraq      Asia 1957   6229.3336
## 111               Iraq      Asia 1962   8341.7378
## 112               Iraq      Asia 1967   8931.4598
## 113               Iraq      Asia 1972   9576.0376
## 114               Iraq      Asia 1977  14688.2351
## 115               Iraq      Asia 1982  14517.9071
## 116               Iraq      Asia 1987  11643.5727
## 117               Iraq      Asia 1992   3745.6407
## 118               Iraq      Asia 1997   3076.2398
## 119               Iraq      Asia 2002   4390.7173
## 120               Iraq      Asia 2007   4471.0619
## 121             Israel      Asia 1952   4086.5221
## 122             Israel      Asia 1957   5385.2785
## 123             Israel      Asia 1962   7105.6307
## 124             Israel      Asia 1967   8393.7414
## 125             Israel      Asia 1972  12786.9322
## 126             Israel      Asia 1977  13306.6192
## 127             Israel      Asia 1982  15367.0292
## 128             Israel      Asia 1987  17122.4799
## 129             Israel      Asia 1992  18051.5225
## 130             Israel      Asia 1997  20896.6092
## 131             Israel      Asia 2002  21905.5951
## 132             Israel      Asia 2007  25523.2771
## 133              Japan      Asia 1952   3216.9563
## 134              Japan      Asia 1957   4317.6944
## 135              Japan      Asia 1962   6576.6495
## 136              Japan      Asia 1967   9847.7886
## 137              Japan      Asia 1972  14778.7864
## 138              Japan      Asia 1977  16610.3770
## 139              Japan      Asia 1982  19384.1057
## 140              Japan      Asia 1987  22375.9419
## 141              Japan      Asia 1992  26824.8951
## 142              Japan      Asia 1997  28816.5850
## 143              Japan      Asia 2002  28604.5919
## 144              Japan      Asia 2007  31656.0681
## 145             Jordan      Asia 1952   1546.9078
## 146             Jordan      Asia 1957   1886.0806
## 147             Jordan      Asia 1962   2348.0092
## 148             Jordan      Asia 1967   2741.7963
## 149             Jordan      Asia 1972   2110.8563
## 150             Jordan      Asia 1977   2852.3516
## 151             Jordan      Asia 1982   4161.4160
## 152             Jordan      Asia 1987   4448.6799
## 153             Jordan      Asia 1992   3431.5936
## 154             Jordan      Asia 1997   3645.3796
## 155             Jordan      Asia 2002   3844.9172
## 156             Jordan      Asia 2007   4519.4612
## 157   Korea, Dem. Rep.      Asia 1952   1088.2778
## 158   Korea, Dem. Rep.      Asia 1957   1571.1347
## 159   Korea, Dem. Rep.      Asia 1962   1621.6936
## 160   Korea, Dem. Rep.      Asia 1967   2143.5406
## 161   Korea, Dem. Rep.      Asia 1972   3701.6215
## 162   Korea, Dem. Rep.      Asia 1977   4106.3012
## 163   Korea, Dem. Rep.      Asia 1982   4106.5253
## 164   Korea, Dem. Rep.      Asia 1987   4106.4923
## 165   Korea, Dem. Rep.      Asia 1992   3726.0635
## 166   Korea, Dem. Rep.      Asia 1997   1690.7568
## 167   Korea, Dem. Rep.      Asia 2002   1646.7582
## 168   Korea, Dem. Rep.      Asia 2007   1593.0655
## 169        Korea, Rep.      Asia 1952   1030.5922
## 170        Korea, Rep.      Asia 1957   1487.5935
## 171        Korea, Rep.      Asia 1962   1536.3444
## 172        Korea, Rep.      Asia 1967   2029.2281
## 173        Korea, Rep.      Asia 1972   3030.8767
## 174        Korea, Rep.      Asia 1977   4657.2210
## 175        Korea, Rep.      Asia 1982   5622.9425
## 176        Korea, Rep.      Asia 1987   8533.0888
## 177        Korea, Rep.      Asia 1992  12104.2787
## 178        Korea, Rep.      Asia 1997  15993.5280
## 179        Korea, Rep.      Asia 2002  19233.9882
## 180        Korea, Rep.      Asia 2007  23348.1397
## 181             Kuwait      Asia 1952 108382.3529
## 182             Kuwait      Asia 1957 113523.1329
## 183             Kuwait      Asia 1962  95458.1118
## 184             Kuwait      Asia 1967  80894.8833
## 185             Kuwait      Asia 1972 109347.8670
## 186             Kuwait      Asia 1977  59265.4771
## 187             Kuwait      Asia 1982  31354.0357
## 188             Kuwait      Asia 1987  28118.4300
## 189             Kuwait      Asia 1992  34932.9196
## 190             Kuwait      Asia 1997  40300.6200
## 191             Kuwait      Asia 2002  35110.1057
## 192             Kuwait      Asia 2007  47306.9898
## 193            Lebanon      Asia 1952   4834.8041
## 194            Lebanon      Asia 1957   6089.7869
## 195            Lebanon      Asia 1962   5714.5606
## 196            Lebanon      Asia 1967   6006.9830
## 197            Lebanon      Asia 1972   7486.3843
## 198            Lebanon      Asia 1977   8659.6968
## 199            Lebanon      Asia 1982   7640.5195
## 200            Lebanon      Asia 1987   5377.0913
## 201            Lebanon      Asia 1992   6890.8069
## 202            Lebanon      Asia 1997   8754.9639
## 203            Lebanon      Asia 2002   9313.9388
## 204            Lebanon      Asia 2007  10461.0587
## 205           Malaysia      Asia 1952   1831.1329
## 206           Malaysia      Asia 1957   1810.0670
## 207           Malaysia      Asia 1962   2036.8849
## 208           Malaysia      Asia 1967   2277.7424
## 209           Malaysia      Asia 1972   2849.0948
## 210           Malaysia      Asia 1977   3827.9216
## 211           Malaysia      Asia 1982   4920.3560
## 212           Malaysia      Asia 1987   5249.8027
## 213           Malaysia      Asia 1992   7277.9128
## 214           Malaysia      Asia 1997  10132.9096
## 215           Malaysia      Asia 2002  10206.9779
## 216           Malaysia      Asia 2007  12451.6558
## 217           Mongolia      Asia 1952    786.5669
## 218           Mongolia      Asia 1957    912.6626
## 219           Mongolia      Asia 1962   1056.3540
## 220           Mongolia      Asia 1967   1226.0411
## 221           Mongolia      Asia 1972   1421.7420
## 222           Mongolia      Asia 1977   1647.5117
## 223           Mongolia      Asia 1982   2000.6031
## 224           Mongolia      Asia 1987   2338.0083
## 225           Mongolia      Asia 1992   1785.4020
## 226           Mongolia      Asia 1997   1902.2521
## 227           Mongolia      Asia 2002   2140.7393
## 228           Mongolia      Asia 2007   3095.7723
## 229            Myanmar      Asia 1952    331.0000
## 230            Myanmar      Asia 1957    350.0000
## 231            Myanmar      Asia 1962    388.0000
## 232            Myanmar      Asia 1967    349.0000
## 233            Myanmar      Asia 1972    357.0000
## 234            Myanmar      Asia 1977    371.0000
## 235            Myanmar      Asia 1982    424.0000
## 236            Myanmar      Asia 1987    385.0000
## 237            Myanmar      Asia 1992    347.0000
## 238            Myanmar      Asia 1997    415.0000
## 239            Myanmar      Asia 2002    611.0000
## 240            Myanmar      Asia 2007    944.0000
## 241              Nepal      Asia 1952    545.8657
## 242              Nepal      Asia 1957    597.9364
## 243              Nepal      Asia 1962    652.3969
## 244              Nepal      Asia 1967    676.4422
## 245              Nepal      Asia 1972    674.7881
## 246              Nepal      Asia 1977    694.1124
## 247              Nepal      Asia 1982    718.3731
## 248              Nepal      Asia 1987    775.6325
## 249              Nepal      Asia 1992    897.7404
## 250              Nepal      Asia 1997   1010.8921
## 251              Nepal      Asia 2002   1057.2063
## 252              Nepal      Asia 2007   1091.3598
## 253               Oman      Asia 1952   1828.2303
## 254               Oman      Asia 1957   2242.7466
## 255               Oman      Asia 1962   2924.6381
## 256               Oman      Asia 1967   4720.9427
## 257               Oman      Asia 1972  10618.0385
## 258               Oman      Asia 1977  11848.3439
## 259               Oman      Asia 1982  12954.7910
## 260               Oman      Asia 1987  18115.2231
## 261               Oman      Asia 1992  18616.7069
## 262               Oman      Asia 1997  19702.0558
## 263               Oman      Asia 2002  19774.8369
## 264               Oman      Asia 2007  22316.1929
## 265           Pakistan      Asia 1952    684.5971
## 266           Pakistan      Asia 1957    747.0835
## 267           Pakistan      Asia 1962    803.3427
## 268           Pakistan      Asia 1967    942.4083
## 269           Pakistan      Asia 1972   1049.9390
## 270           Pakistan      Asia 1977   1175.9212
## 271           Pakistan      Asia 1982   1443.4298
## 272           Pakistan      Asia 1987   1704.6866
## 273           Pakistan      Asia 1992   1971.8295
## 274           Pakistan      Asia 1997   2049.3505
## 275           Pakistan      Asia 2002   2092.7124
## 276           Pakistan      Asia 2007   2605.9476
## 277        Philippines      Asia 1952   1272.8810
## 278        Philippines      Asia 1957   1547.9448
## 279        Philippines      Asia 1962   1649.5522
## 280        Philippines      Asia 1967   1814.1274
## 281        Philippines      Asia 1972   1989.3741
## 282        Philippines      Asia 1977   2373.2043
## 283        Philippines      Asia 1982   2603.2738
## 284        Philippines      Asia 1987   2189.6350
## 285        Philippines      Asia 1992   2279.3240
## 286        Philippines      Asia 1997   2536.5349
## 287        Philippines      Asia 2002   2650.9211
## 288        Philippines      Asia 2007   3190.4810
## 289       Saudi Arabia      Asia 1952   6459.5548
## 290       Saudi Arabia      Asia 1957   8157.5912
## 291       Saudi Arabia      Asia 1962  11626.4197
## 292       Saudi Arabia      Asia 1967  16903.0489
## 293       Saudi Arabia      Asia 1972  24837.4287
## 294       Saudi Arabia      Asia 1977  34167.7626
## 295       Saudi Arabia      Asia 1982  33693.1753
## 296       Saudi Arabia      Asia 1987  21198.2614
## 297       Saudi Arabia      Asia 1992  24841.6178
## 298       Saudi Arabia      Asia 1997  20586.6902
## 299       Saudi Arabia      Asia 2002  19014.5412
## 300       Saudi Arabia      Asia 2007  21654.8319
## 301          Singapore      Asia 1952   2315.1382
## 302          Singapore      Asia 1957   2843.1044
## 303          Singapore      Asia 1962   3674.7356
## 304          Singapore      Asia 1967   4977.4185
## 305          Singapore      Asia 1972   8597.7562
## 306          Singapore      Asia 1977  11210.0895
## 307          Singapore      Asia 1982  15169.1611
## 308          Singapore      Asia 1987  18861.5308
## 309          Singapore      Asia 1992  24769.8912
## 310          Singapore      Asia 1997  33519.4766
## 311          Singapore      Asia 2002  36023.1054
## 312          Singapore      Asia 2007  47143.1796
## 313          Sri Lanka      Asia 1952   1083.5320
## 314          Sri Lanka      Asia 1957   1072.5466
## 315          Sri Lanka      Asia 1962   1074.4720
## 316          Sri Lanka      Asia 1967   1135.5143
## 317          Sri Lanka      Asia 1972   1213.3955
## 318          Sri Lanka      Asia 1977   1348.7757
## 319          Sri Lanka      Asia 1982   1648.0798
## 320          Sri Lanka      Asia 1987   1876.7668
## 321          Sri Lanka      Asia 1992   2153.7392
## 322          Sri Lanka      Asia 1997   2664.4773
## 323          Sri Lanka      Asia 2002   3015.3788
## 324          Sri Lanka      Asia 2007   3970.0954
## 325              Syria      Asia 1952   1643.4854
## 326              Syria      Asia 1957   2117.2349
## 327              Syria      Asia 1962   2193.0371
## 328              Syria      Asia 1967   1881.9236
## 329              Syria      Asia 1972   2571.4230
## 330              Syria      Asia 1977   3195.4846
## 331              Syria      Asia 1982   3761.8377
## 332              Syria      Asia 1987   3116.7743
## 333              Syria      Asia 1992   3340.5428
## 334              Syria      Asia 1997   4014.2390
## 335              Syria      Asia 2002   4090.9253
## 336              Syria      Asia 2007   4184.5481
## 337             Taiwan      Asia 1952   1206.9479
## 338             Taiwan      Asia 1957   1507.8613
## 339             Taiwan      Asia 1962   1822.8790
## 340             Taiwan      Asia 1967   2643.8587
## 341             Taiwan      Asia 1972   4062.5239
## 342             Taiwan      Asia 1977   5596.5198
## 343             Taiwan      Asia 1982   7426.3548
## 344             Taiwan      Asia 1987  11054.5618
## 345             Taiwan      Asia 1992  15215.6579
## 346             Taiwan      Asia 1997  20206.8210
## 347             Taiwan      Asia 2002  23235.4233
## 348             Taiwan      Asia 2007  28718.2768
## 349           Thailand      Asia 1952    757.7974
## 350           Thailand      Asia 1957    793.5774
## 351           Thailand      Asia 1962   1002.1992
## 352           Thailand      Asia 1967   1295.4607
## 353           Thailand      Asia 1972   1524.3589
## 354           Thailand      Asia 1977   1961.2246
## 355           Thailand      Asia 1982   2393.2198
## 356           Thailand      Asia 1987   2982.6538
## 357           Thailand      Asia 1992   4616.8965
## 358           Thailand      Asia 1997   5852.6255
## 359           Thailand      Asia 2002   5913.1875
## 360           Thailand      Asia 2007   7458.3963
## 361            Vietnam      Asia 1952    605.0665
## 362            Vietnam      Asia 1957    676.2854
## 363            Vietnam      Asia 1962    772.0492
## 364            Vietnam      Asia 1967    637.1233
## 365            Vietnam      Asia 1972    699.5016
## 366            Vietnam      Asia 1977    713.5371
## 367            Vietnam      Asia 1982    707.2358
## 368            Vietnam      Asia 1987    820.7994
## 369            Vietnam      Asia 1992    989.0231
## 370            Vietnam      Asia 1997   1385.8968
## 371            Vietnam      Asia 2002   1764.4567
## 372            Vietnam      Asia 2007   2441.5764
## 373 West Bank and Gaza      Asia 1952   1515.5923
## 374 West Bank and Gaza      Asia 1957   1827.0677
## 375 West Bank and Gaza      Asia 1962   2198.9563
## 376 West Bank and Gaza      Asia 1967   2649.7150
## 377 West Bank and Gaza      Asia 1972   3133.4093
## 378 West Bank and Gaza      Asia 1977   3682.8315
## 379 West Bank and Gaza      Asia 1982   4336.0321
## 380 West Bank and Gaza      Asia 1987   5107.1974
## 381 West Bank and Gaza      Asia 1992   6017.6548
## 382 West Bank and Gaza      Asia 1997   7110.6676
## 383 West Bank and Gaza      Asia 2002   4515.4876
## 384 West Bank and Gaza      Asia 2007   3025.3498
## 385        Yemen, Rep.      Asia 1952    781.7176
## 386        Yemen, Rep.      Asia 1957    804.8305
## 387        Yemen, Rep.      Asia 1962    825.6232
## 388        Yemen, Rep.      Asia 1967    862.4421
## 389        Yemen, Rep.      Asia 1972   1265.0470
## 390        Yemen, Rep.      Asia 1977   1829.7652
## 391        Yemen, Rep.      Asia 1982   1977.5570
## 392        Yemen, Rep.      Asia 1987   1971.7415
## 393        Yemen, Rep.      Asia 1992   1879.4967
## 394        Yemen, Rep.      Asia 1997   2117.4845
## 395        Yemen, Rep.      Asia 2002   2234.8208
## 396        Yemen, Rep.      Asia 2007   2280.7699</code></pre>
<p>From the results above, you can see how only data from Asia were selected.</p>
</div>
<div id="pivot-table" class="section level2 unnumbered">
<h2>Pivot table<a class="anchor" aria-label="anchor" href="#pivot-table"><i class="fas fa-link"></i></a>
</h2>
<p>Pivottables are a functionality originally developed in Excel, which allows you to summarize data by attributes. Lets do an example to see how this work.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">GDPData</span><span class="op">)</span>             <span class="co">#lets look at the column head of the GDP data we loaded earlier.</span></span></code></pre></div>
<pre><code>##       country continent year gdpPercap
## 1699 Zimbabwe    Africa 1982  788.8550
## 1700 Zimbabwe    Africa 1987  706.1573
## 1701 Zimbabwe    Africa 1992  693.4208
## 1702 Zimbabwe    Africa 1997  792.4500
## 1703 Zimbabwe    Africa 2002  672.0386
## 1704 Zimbabwe    Africa 2007  469.7093</code></pre>
<p>If you look at the GDP database above, you will see that the data also includes the years of the GDPs. What if I want to summarize the data by country? Say for each country, I just want the average of all GDPs of the different years?. For that we use the function summarize from the dplr package. Like this:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GDPData</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean_GDP <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">gdpPercap</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Ok, now let that code talk to you. Code is like reading a book; you read from the first word forward to start making a visual representation of that the sentence is saying.</p>
<p>Coding is not different. Lets take the code above and read it from left to right, like in the image below. In the image below you can see what each part of the code is saying.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-101"></span>
<img src="images/Pivot.png" alt="Filter function" width="100%"><p class="caption">
Figure 3.8: Filter function
</p>
</div>
<p>It is a good practice for you to read the code. Lets tray to translate the code above (look at the image above as we do the translation). Here I go….first I take the dataframe called GDPData, then I group that dataframe by country, then I summarize the data on GDP by the mean values, oh, and I want the resulting mean to be called mean_GDP. Easy right!.</p>
</div>
<div id="merge-data" class="section level2 unnumbered">
<h2>Merge data<a class="anchor" aria-label="anchor" href="#merge-data"><i class="fas fa-link"></i></a>
</h2>
<p>One other very common operation in R coding is to merge dataframes by common attributes (i.e., common column).</p>
<p>In the section about Data structure types, we sow how to merge matrices or dataframes using the rbind or cbind functions, which work when the different databases can be paired by simply appending one database to the other. For instance, when the columns are in exact order in the two databases.</p>
<p>Here we will use the merge function, or so call full_join from the dplr package, which works for cases when the data cannot be paired by simply appending one database to another. For instance, when the columns and/or rows are not in the exact order.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-102"></span>
<img src="images/Merge.png" alt="Merging function" width="100%"><p class="caption">
Figure 3.9: Merging function
</p>
</div>
<p>Let’s use an example. As you know we have already loaded in this current section of R a database of the GPDs of the countries in the world.</p>
<p>What if I now collect another database about the average life expectancy per country, and want to put those two databases together?</p>
<p>Since the data comes from difference sources, chances are that they differ in the number of columns, in the order of the columns, in the number of rows, etc. Basically, you cannot use rbind or cbind in this case.</p>
<p>You could do that pairing of the two database by brutal force, copying the data from each country from one database, and pasting it in the same row for the given country in the other database. Say that operation takes you ten seconds for each country, and there are 250 countries, then that job will take you about 40 minutes, not to mention the chance for errors.</p>
<p>Oh, but remember that each country has 40 years of data. So multiplyy the 40 minutes times 40 years, and you end up copying and pasting for more than a day. Alternatively you have R do the merging for you. Lets try it.</p>
<p>First, lets load the data on the life expectancy, which I have placed in my Github folder</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ExpectancyData</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/Camilo-Mora/GEO380/main/Datasets/Countries_LifeExpectancy.csv"</span><span class="op">)</span></span></code></pre></div>
<p>It is good practice to always check at least a portion of the database to check it has been loaded correctly,</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">ExpectancyData</span><span class="op">)</span>      <span class="co">#lets look at the column head of the Expectancy data we just loaded.</span></span></code></pre></div>
<pre><code>##         X  country continent year lifeExp
## 1699 1699 Zimbabwe    Africa 1982  60.363
## 1700 1700 Zimbabwe    Africa 1987  62.351
## 1701 1701 Zimbabwe    Africa 1992  60.377
## 1702 1702 Zimbabwe    Africa 1997  46.809
## 1703 1703 Zimbabwe    Africa 2002  39.989
## 1704 1704 Zimbabwe    Africa 2007  43.487</code></pre>
<p>Lets check the GDP database as well.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">GDPData</span><span class="op">)</span>            <span class="co">#lets look at the column head of the GDP data we loaded earlier.</span></span></code></pre></div>
<pre><code>##       country continent year gdpPercap
## 1699 Zimbabwe    Africa 1982  788.8550
## 1700 Zimbabwe    Africa 1987  706.1573
## 1701 Zimbabwe    Africa 1992  693.4208
## 1702 Zimbabwe    Africa 1997  792.4500
## 1703 Zimbabwe    Africa 2002  672.0386
## 1704 Zimbabwe    Africa 2007  469.7093</code></pre>
<p>Ok, we now have two databases loaded in R, one for the data on GDP and the other for the data on life expectancy. Lets merge them together, like this:</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MergeData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join</a></span><span class="op">(</span><span class="va">GDPData</span>, <span class="va">ExpectancyData</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"country"</span>,<span class="st">"year"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now lets try to read, that line of code, like this:</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-107"></span>
<img src="images/Merge_Function.png" alt="Merging function" width="100%"><p class="caption">
Figure 3.10: Merging function
</p>
</div>
<p>If I translate this…basically, create a new dataframe called MergeData, in which I want to merge in full the database on GDPData and ExpectancyData by their common attribute country and year.</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">MergeData</span><span class="op">)</span>            <span class="co">#Check the results</span></span></code></pre></div>
<pre><code>##       country continent.x year gdpPercap    X continent.y lifeExp
## 1699 Zimbabwe      Africa 1982  788.8550 1699      Africa  60.363
## 1700 Zimbabwe      Africa 1987  706.1573 1700      Africa  62.351
## 1701 Zimbabwe      Africa 1992  693.4208 1701      Africa  60.377
## 1702 Zimbabwe      Africa 1997  792.4500 1702      Africa  46.809
## 1703 Zimbabwe      Africa 2002  672.0386 1703      Africa  39.989
## 1704 Zimbabwe      Africa 2007  469.7093 1704      Africa  43.487</code></pre>
</div>
<div id="subsetting-columns" class="section level2 unnumbered">
<h2>Subsetting columns<a class="anchor" aria-label="anchor" href="#subsetting-columns"><i class="fas fa-link"></i></a>
</h2>
<p>From the new database I just created, you can see how there are some columns that came with the original databases, which I do not need and do not I want to use. For this, you can create a new database with only the columns you want or delete the columns you do not like. Lets try.</p>
<div id="deleting-columns" class="section level3 unnumbered">
<h3>Deleting columns<a class="anchor" aria-label="anchor" href="#deleting-columns"><i class="fas fa-link"></i></a>
</h3>
<p>This is the simplest approach. Basically, I set the column I want to delete to NULL. Like this,</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MergeData</span><span class="op">$</span><span class="va">X</span><span class="op">=</span> <span class="cn">NULL</span>            <span class="co">#with this code I delete the column called X, which is probably an index number used by one of the data sources</span></span></code></pre></div>
<p>Now, you try to delete the column “continent.x”.</p>
</div>
<div id="selecting-columns" class="section level3 unnumbered">
<h3>Selecting columns<a class="anchor" aria-label="anchor" href="#selecting-columns"><i class="fas fa-link"></i></a>
</h3>
<p>Obviously, if you have many columns that you do not need, deleting columns may take a while, as you have to type each column name you want to delete. Alternatively, you can simply select the columns you need. Like this,</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SelectedColumns</span><span class="op">=</span><span class="va">MergeData</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"country"</span>,<span class="st">"year"</span>,  <span class="st">"gdpPercap"</span>, <span class="st">"lifeExp"</span> <span class="op">)</span> <span class="op">]</span></span></code></pre></div>
<p>This syntax should be familiar to you already. As it is the indexing function we used earlier [rows, columns].</p>
<p>If you read the code above, basically….I created a new database called SelectedColumns, which takes the database MergeData and select all rows (because there is nothing to the left of the comma) and the four columns listed in the vector after the comma.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">SelectedColumns</span><span class="op">)</span></span></code></pre></div>
<pre><code>##       country year gdpPercap lifeExp
## 1 Afghanistan 1952  779.4453  28.801
## 2 Afghanistan 1957  820.8530  30.332
## 3 Afghanistan 1962  853.1007  31.997
## 4 Afghanistan 1967  836.1971  34.020
## 5 Afghanistan 1972  739.9811  36.088
## 6 Afghanistan 1977  786.1134  38.438</code></pre>
<p>f</p>
</div>
</div>
<div id="adding-results-to-databases" class="section level2 unnumbered">
<h2>Adding results to databases<a class="anchor" aria-label="anchor" href="#adding-results-to-databases"><i class="fas fa-link"></i></a>
</h2>
<p>Up to this point, we have simply manipulated the data other people collected. What if we now want to do our own analysis with such data? Piece of cake…</p>
<p>…lets tray, for instance, a new index, in which I want to see how much does it cost a year of life in each country. Basically, all I have to do is to divide how much each person does in each country (i.e., GDP per capita) by the life expectancy of people in each country. Like this,</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SelectedColumns</span><span class="op">$</span><span class="va">ValueofLife</span> <span class="op">=</span> <span class="va">SelectedColumns</span><span class="op">$</span><span class="va">gdpPercap</span> <span class="op">/</span> <span class="va">SelectedColumns</span><span class="op">$</span><span class="va">lifeExp</span> </span></code></pre></div>
<p>WE cant translate the code above as, a a column called ValueofLife to the dataframe SelectedColumns, in which I divide gdpPercap by lifeExp.</p>
<p>Lets check the results,</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">SelectedColumns</span><span class="op">)</span></span></code></pre></div>
<pre><code>##       country year gdpPercap lifeExp ValueofLife
## 1 Afghanistan 1952  779.4453  28.801    27.06313
## 2 Afghanistan 1957  820.8530  30.332    27.06228
## 3 Afghanistan 1962  853.1007  31.997    26.66190
## 4 Afghanistan 1967  836.1971  34.020    24.57957
## 5 Afghanistan 1972  739.9811  36.088    20.50491
## 6 Afghanistan 1977  786.1134  38.438    20.45146</code></pre>
<p>Lets do a quiick summary to see the average per country,</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SelectedColumns</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">country</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean_valueOfLife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ValueofLife</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 142 x 2
##    country     mean_valueOfLife
##    &lt;chr&gt;                  &lt;dbl&gt;
##  1 Afghanistan             21.8
##  2 Albania                 46.7
##  3 Algeria                 73.7
##  4 Angola                  97.2
##  5 Argentina              129. 
##  6 Australia              263. 
##  7 Austria                273. 
##  8 Bahrain                271. 
##  9 Bangladesh              16.3
## 10 Belgium                266. 
## # ... with 132 more rows</code></pre>
<p>Have a look at the result above. Isn’t it fascinating how in Afghanistan we could increase the life expectancy by one year by simply having people making $21.8 dollars more!</p>
</div>
<div id="exercise-3" class="section level2 unnumbered">
<h2>Exercise<a class="anchor" aria-label="anchor" href="#exercise-3"><i class="fas fa-link"></i></a>
</h2>
<iframe src="https://mora.shinyapps.io/Quiz_4/" width="100%" height="1000px">
</iframe>
</div>
<div id="homework-1" class="section level2 unnumbered">
<h2>Homework<a class="anchor" aria-label="anchor" href="#homework-1"><i class="fas fa-link"></i></a>
</h2>
<p>Do the following exercise:</p>
<p>Open a new file in Tinn-R. and write the R code to do the following:</p>
<ol style="list-style-type: decimal">
<li><p>Load the GDP and life expectancy databases, which we already loaded. Also add a database called, “Countries_Population.csv”, which is in the same path you used for the other two databases thata re online in my Github folder.</p></li>
<li><p>Merge the three databases, by country and year.</p></li>
<li><p>Remove all unnecessary columns (you only want country, year, GDP per capita, life expectancy and population).</p></li>
<li><p>Calculate the total GDP of each nation (basically, multiple per capita GDP by the number of people).</p></li>
<li><p>Calculate the average Total GDP of each country.</p></li>
</ol>
<p>Save the necessary code in Tinn and have it ready for next class.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="installing-programs.html"><span class="header-section-number">2</span> Installing programs</a></div>
<div class="next"><a href="basic-plots.html"><span class="header-section-number">4</span> Basic plots</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#basics-on-data-manipulation-in-r"><span class="header-section-number">3</span> Basics on data manipulation in R</a></li>
<li><a class="nav-link" href="#variables-1">Variables</a></li>
<li><a class="nav-link" href="#comments">Comments</a></li>
<li>
<a class="nav-link" href="#operators">Operators</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#assignment-operators">Assignment operators</a></li>
<li><a class="nav-link" href="#arithmetic-operators">Arithmetic operators</a></li>
<li><a class="nav-link" href="#character-operators">Character operators</a></li>
</ul>
</li>
<li><a class="nav-link" href="#custom-made-functions">Custom made functions</a></li>
<li>
<a class="nav-link" href="#data-structure-types">Data structure types</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#vectors">Vectors</a></li>
<li><a class="nav-link" href="#matrix">Matrix</a></li>
<li><a class="nav-link" href="#dataframes">DataFrames</a></li>
</ul>
</li>
<li><a class="nav-link" href="#loading-your-own-data-into-r">Loading your own data into R</a></li>
<li><a class="nav-link" href="#calling-elements-in-a-data-frame">Calling elements in a data frame</a></li>
<li><a class="nav-link" href="#filter-data">Filter data</a></li>
<li><a class="nav-link" href="#pivot-table">Pivot table</a></li>
<li><a class="nav-link" href="#merge-data">Merge data</a></li>
<li>
<a class="nav-link" href="#subsetting-columns">Subsetting columns</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#deleting-columns">Deleting columns</a></li>
<li><a class="nav-link" href="#selecting-columns">Selecting columns</a></li>
</ul>
</li>
<li><a class="nav-link" href="#adding-results-to-databases">Adding results to databases</a></li>
<li><a class="nav-link" href="#exercise-3">Exercise</a></li>
<li><a class="nav-link" href="#homework-1">Homework</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong><h1 style="font-size:17px">
By Camilo Mora, Ph.D.
</h1></strong>" was written by . </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
